webform_cleanup
===============

These scripts process webform submissions to the Senate's Thanksgiving essay contest.

ADDING DISTRICTS
add-districts.php iterates over a TSV file of submissions and uses the Senate's
SAGE API to add a Senate district based on the address supplied for each submission.
The syntax for executing this script is:

  php add-districts.php {filepath} [option]

where

  {filepath} is the path to the TSV file
  [option] can be either --debug or --zips

  --debug tells the script to only iterate over the first 100 records and to output some debugging
          information to confirm that the script is correctly looking up districts from addresses.
  --zips doesn't actually look up districts. It just outputs each line, followed by the address and
          zip code extracted from each line.

RENDERING HTML
render-html.php iterates over the TSV file generated by add-districts.php and
renders each row into HTML, generating a separate HTML file for each Senate district.
The resulting HTML can then be copied-and-pasted into the content area of node pages.

WORKFLOW FOR PROCESSING SUBMISSIONS

(1) Download webform results
(2) Open results file and resave in Textmate to fix line returns
(3) Clean up submissions using Google Refine
(4) Export cleaned up results from Google Refine, open in Textmate and resave to fix line returns.
(5) Run add-districts.php to add Senate districts
(6) Open resulting file in Excel and sort by (1) district, (2) school, and (3) name of child
(7) Export results as tab text
(8) Run render-html.php to generate HTML for each senate district.
(9) Copy-and-paste to create a page for each district.
